<script src="//maps.google.com/maps/api/js?key=AIzaSyCj5WxwF7qYcjlvsjtzabyVi0Se1WtuA6w"></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->
 <!-- Script is used to connect to Google API, This nees to be moved to a better location 
 since it has been copied in index and show view-->
<h1><%= (t'home_page.title') %></h1>
<h2><%= (t'home_page.browse') %></h2>

<!--<script>

var x = document.getElementById("gps");

function getLocation() {

    if (navigator.geolocation) {

        navigator.geolocation.getCurrentPosition(showPosition);

    } else {

        x.innerHTML = "Geolocation is not supported by this browser.";

    }

}

function showPosition(position) {

    x.value = position.coords.latitude + "," + position.coords.longitude; 

}

getLocation();

</script>-->

<div class="container">
  <div class="form-horizontal">
      <div class="form-group">
          <%= form_for search_path, method: :get, :html => {:class => "form-horizontal center"} do |f| %>
          <%= text_field_tag :search, params[:search], placeholder: (t'search_page.plchldr_search'), :class => 'form-control search-input' %>
          <%= button_tag(type: "submit", class: "btn btn-info btn-md btn-block center-block", :name => nil) do %>
          <span class="glyphicon glyphicon-search"></span>
          <%= (t'search_page.bttn_search') %> 
          <% end %>
          <% end %>
      </div>
  </div>
</div>

<div class="container visible-block">
  <%= link_to (t'new_page.h1'), new_agency_path, class: "btn btn-primary" %>
</div>
<h1 class="center">Listing all organizations</h1>
<!-- Code here is used to build the map by google-maps-for-rails-->
<div class="col-md-6 col-sm-3">
<div class="map-responsive">
<div style='width: 800px;'>
  <div id="map" style='width: 800px; height: 400px;'>
  </div>
</div>
</div>
</div>

<script type="text/javascript">
handler = Gmaps.build('Google');
handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
  markers = handler.addMarkers(<%=raw @hash.to_json %>);

  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
});
</script>

<div class="center">
  <%#= will_paginate %>
</div>
<%# render 'agency', obj: @agencies %>
<div class="center">
  <%#= will_paginate %>
</div>
